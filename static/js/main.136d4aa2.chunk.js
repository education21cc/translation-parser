(this["webpackJsonp21cc-translation-parser"]=this["webpackJsonp21cc-translation-parser"]||[]).push([[0],{104:function(e,t){},221:function(e,t,a){e.exports=a(417)},226:function(e,t,a){},227:function(e,t,a){},276:function(e,t){},278:function(e,t){},287:function(e,t){},289:function(e,t){},315:function(e,t){},317:function(e,t){},318:function(e,t){},324:function(e,t){},326:function(e,t){},344:function(e,t){},347:function(e,t){},363:function(e,t){},366:function(e,t){},417:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),l=a.n(c),o=(a(226),a(16)),u=(a(227),a(108)),s=a.n(u),i=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){s.a.getItem(e).then((function(e){c(e)}))}),[e]),[r,Object(n.useCallback)((function(t){c(t),s.a.setItem(e,t)}),[e])]},d=a(419),f=a(214),m=a(420),h=a(31),p=function(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],l=a[1],u=i("apiKey"),s=Object(o.a)(u,2),p=s[0],v=s[1],E=e.onChange;Object(n.useEffect)((function(){p&&E(p)}),[p,E]);var b=function(){v(null)};return c?r.a.createElement(d.a,{className:"mb-3"},r.a.createElement(f.a,{placeholder:c,className:"text-danger",readOnly:!0}),r.a.createElement(d.a.Append,null,r.a.createElement(m.a,{variant:"outline-secondary",onClick:b},"Clear"))):p?r.a.createElement(d.a,{className:"mb-3"},r.a.createElement(f.a,{placeholder:p.file,readOnly:!0}),r.a.createElement(d.a.Append,null,r.a.createElement(m.a,{variant:"outline-secondary",onClick:b},"Clear"))):r.a.createElement(h.a.File,{type:"file",accept:".json",onChange:function(e){var t,a,n=null===(t=e.target)||void 0===t||null===(a=t.files)||void 0===a?void 0:a[0];if(!n)return null;var r=new FileReader;r.addEventListener("load",(function(e){try{var t,a=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);void 0!==a.client_email&&void 0!==a.private_key||l("Not a valid JSON file!");var r={file:n.name,credentials:a};v(r)}catch(c){l("Error reading file. Is it a API json file?")}})),r.readAsText(n)}})},v=a(217),E=a(109),b=function(e){var t=i("sheetId"),a=Object(o.a)(t,2),c=a[0],l=a[1],u=e.onChange;return Object(n.useEffect)((function(){c&&u(c)}),[c,u]),r.a.createElement(h.a.Control,{type:"text",value:c||"",onChange:function(t){l(t.target.value),e.onChange(t.target.value)}})},j=a(10),O=a.n(j),g=a(75),y=a(215),I=a(421),k=a(422),C=function(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(),s=Object(o.a)(u,2),i=s[0],d=s[1],f=Object(n.useState)(),p=Object(o.a)(f,2),v=p[0],E=p[1],b=Object(n.useState)([]),j=Object(o.a)(b,2),C=j[0],x=j[1],w=Object(n.useState)(),S=Object(o.a)(w,2),A=S[0],N=S[1];Object(n.useEffect)((function(){(function(){var t=Object(g.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new y.GoogleSpreadsheet(e.sheetId),t.next=4,a.useServiceAccountAuth(e.credentials);case 4:return t.next=6,a.loadInfo();case 6:E(a.sheetsByIndex[0].sheetId),d(a),t.next=22;break;case 10:if(t.prev=10,t.t0=t.catch(0),t.t0.response){t.next=15;break}return l("Generic error!\n".concat(t.t0)),t.abrupt("return");case 15:t.t1=t.t0.response.status,t.next=403===t.t1?18:404===t.t1?20:22;break;case 18:return l("Credentials invalid. \nEnsure '".concat(e.credentials.client_email,"' has read access to the sheet.")),t.abrupt("break",22);case 20:return l("Invalid sheet id"),t.abrupt("break",22);case 22:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[e.credentials,e.sheetId]),Object(n.useEffect)((function(){i&&void 0!==v&&function(){var e=Object(g.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.sheetsById[v].loadHeaderRow();case 2:t=i.sheetsById[v].headerValues.filter((function(e,t){return t>0})),x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i,v]),Object(n.useEffect)((function(){A&&-1!==C.indexOf(A)||N(C[0])}),[C,A]);return c?r.a.createElement(I.a,{variant:"danger"},c.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)}))):i&&void 0!==v?r.a.createElement(k.a,null,r.a.createElement(k.a.Body,null,r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Game"),r.a.createElement(h.a.Control,{as:"select",onChange:function(e){E(e.target.value)}},i.sheetsByIndex.map((function(e){return r.a.createElement("option",{key:e.sheetId,value:e.sheetId},e.title)})))),r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Language"),r.a.createElement(h.a.Control,{as:"select",onChange:function(e){N(e.target.value)}},C.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),void 0!==A&&void 0!==v&&r.a.createElement(m.a,{onClick:function(){(function(){var e=Object(g.a)(O.a.mark((function e(){var t,a,n,r,c,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&void 0!==A&&void 0!==v){e.next=2;break}return e.abrupt("return");case 2:return t=i.sheetsById[v].headerValues[0],e.next=5,i.sheetsById[v].getRows();case 5:a=e.sent,n=a.reduce((function(e,a){return void 0!==a[t]&&(e[a[t]]=a[A]),e}),{}),r=document.createElement("a"),c=JSON.stringify(n),l="".concat(i.sheetsById[v].title,"_").concat(A,".json"),r.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent(c)),r.setAttribute("download",l),r.click();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},"Download"))):r.a.createElement(I.a,{variant:"info"},"Loading...")};var x=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),u=Object(o.a)(l,2),s=u[0],i=u[1],d=Object(n.useState)(!1),f=Object(o.a)(d,2),j=f[0],O=f[1],g=Object(n.useState)(!1),y=Object(o.a)(g,2),k=y[0],x=y[1];return r.a.createElement("div",{className:"App"},r.a.createElement(v.a,{className:"text-center"},r.a.createElement("h1",null,"Translation parser")),r.a.createElement(E.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"API Key (json file)"),r.a.createElement(h.a.Text,{className:"text-muted"},r.a.createElement("ol",null,r.a.createElement("li",null,"Go to: https://console.developers.google.com/ and create a project"),r.a.createElement("li",null,"Add the Google Sheets API"),r.a.createElement("li",null,"Create a service account"),r.a.createElement("li",null,"Create a new JSON key under this service account and upload this key here"),r.a.createElement("li",null,"Ensure share the google sheet to the the e-mail address of the service account"))),r.a.createElement(p,{onChange:c})),r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Sheet ID"),r.a.createElement(h.a.Text,{className:"text-muted"},"Copy from https://docs.google.com/spreadsheets/d/<SHEET ID>"),r.a.createElement(b,{onChange:i}))),(!j||!a||!s)&&r.a.createElement(m.a,{onClick:function(){if(!a||!s)return x(!0),void O(!1);x(!1),O(!0)}},"Read sheet!"),k&&r.a.createElement(I.a,{variant:"danger",className:"mt-3",onClose:function(){return x(!1)},dismissible:!0},"Please upload a API key json and fill out the sheet ID")),r.a.createElement(E.a,null,a&&s&&j&&r.a.createElement(C,{sheetId:s,credentials:a.credentials})),r.a.createElement("p",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[221,1,2]]]);
//# sourceMappingURL=main.136d4aa2.chunk.js.map