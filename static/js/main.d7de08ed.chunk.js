(this["webpackJsonp21cc-translation-parser"]=this["webpackJsonp21cc-translation-parser"]||[]).push([[0],{104:function(e,t){},221:function(e,t,a){e.exports=a(417)},226:function(e,t,a){},275:function(e,t){},277:function(e,t){},286:function(e,t){},288:function(e,t){},314:function(e,t){},316:function(e,t){},317:function(e,t){},323:function(e,t){},325:function(e,t){},343:function(e,t){},346:function(e,t){},362:function(e,t){},365:function(e,t){},416:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),l=a.n(c),o=(a(226),a(18)),u=a(108),s=a.n(u),i=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){s.a.getItem(e).then((function(e){c(e)}))}),[e]),[r,Object(n.useCallback)((function(t){c(t),s.a.setItem(e,t)}),[e])]},d=a(419),f=a(214),m=a(420),h=a(31),p=function(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],l=a[1],u=i("apiKey"),s=Object(o.a)(u,2),p=s[0],v=s[1],E=e.onChange;Object(n.useEffect)((function(){p&&E(p)}),[p,E]);var b=function(){v(null)};return c?r.a.createElement(d.a,{className:"mb-3"},r.a.createElement(f.a,{placeholder:c,className:"text-danger",readOnly:!0}),r.a.createElement(d.a.Append,null,r.a.createElement(m.a,{variant:"outline-secondary",onClick:b},"Clear"))):p?r.a.createElement(d.a,{className:"mb-3"},r.a.createElement(f.a,{placeholder:p.file,readOnly:!0}),r.a.createElement(d.a.Append,null,r.a.createElement(m.a,{variant:"outline-secondary",onClick:b},"Clear"))):r.a.createElement(h.a.File,{type:"file",accept:".json",onChange:function(e){var t,a,n=null===(t=e.target)||void 0===t||null===(a=t.files)||void 0===a?void 0:a[0];if(!n)return null;var r=new FileReader;r.addEventListener("load",(function(e){try{var t,a=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);void 0!==a.client_email&&void 0!==a.private_key||l("Not a valid JSON file!");var r={file:n.name,credentials:a};v(r)}catch(c){l("Error reading file. Is it a API json file?")}})),r.readAsText(n)}})},v=a(217),E=a(109),b=function(e){var t=i("sheetId"),a=Object(o.a)(t,2),c=a[0],l=a[1],u=e.onChange;return Object(n.useEffect)((function(){c&&u(c)}),[c,u]),r.a.createElement(h.a.Control,{type:"text",value:c||"",onChange:function(t){l(t.target.value),e.onChange(t.target.value)}})},j=a(10),O=a.n(j),g=a(75),y=a(215),I=a(421),k=a(422),C=function(e){var t=e.setError,a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],u=c[1],s=Object(n.useState)(),i=Object(o.a)(s,2),d=i[0],f=i[1],p=Object(n.useState)([]),v=Object(o.a)(p,2),E=v[0],b=v[1],j=Object(n.useState)(),C=Object(o.a)(j,2),x=C[0],w=C[1];Object(n.useEffect)((function(){(function(){var a=Object(g.a)(O.a.mark((function a(){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=new y.GoogleSpreadsheet(e.sheetId),a.next=4,n.useServiceAccountAuth(e.credentials);case 4:return a.next=6,n.loadInfo();case 6:f(n.sheetsByIndex[0].sheetId),u(n),a.next=22;break;case 10:if(a.prev=10,a.t0=a.catch(0),a.t0.response){a.next=15;break}return t("Generic error!\n".concat(a.t0)),a.abrupt("return");case 15:a.t1=a.t0.response.status,a.next=403===a.t1?18:404===a.t1?20:22;break;case 18:return t("Credentials invalid. \nEnsure '".concat(e.credentials.client_email,"' has read access to the sheet.")),a.abrupt("break",22);case 20:return t("Invalid sheet id"),a.abrupt("break",22);case 22:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}})()()}),[e.credentials,e.sheetId,t]),Object(n.useEffect)((function(){l&&void 0!==d&&function(){var e=Object(g.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.sheetsById[d].loadHeaderRow();case 2:t=l.sheetsById[d].headerValues.filter((function(e,t){return t>0})),b(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,d]),Object(n.useEffect)((function(){x&&-1!==E.indexOf(x)||w(E[0])}),[E,x]);return l&&void 0!==d?r.a.createElement(k.a,null,r.a.createElement(k.a.Body,null,r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Game"),r.a.createElement(h.a.Control,{as:"select",onChange:function(e){f(e.target.value)}},l.sheetsByIndex.map((function(e){return r.a.createElement("option",{key:e.sheetId,value:e.sheetId},e.title)})))),r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Language"),r.a.createElement(h.a.Control,{as:"select",onChange:function(e){w(e.target.value)}},E.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),void 0!==x&&void 0!==d&&r.a.createElement(m.a,{onClick:function(){(function(){var e=Object(g.a)(O.a.mark((function e(){var t,a,n,r,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&void 0!==x&&void 0!==d){e.next=2;break}return e.abrupt("return");case 2:return t=l.sheetsById[d].headerValues[0],e.next=5,l.sheetsById[d].getRows();case 5:a=e.sent,n={translations:a.reduce((function(e,a){return void 0!==a[t]&&e.push({key:a[t],value:a[x]}),e}),[])},r=document.createElement("a"),c=JSON.stringify(n),o="".concat(l.sheetsById[d].title,"_").concat(x,".json"),r.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent(c)),r.setAttribute("download",o),r.click();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},"Download"))):r.a.createElement(I.a,{variant:"info"},"Loading...")};a(416);var x=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),u=Object(o.a)(l,2),s=u[0],i=u[1],d=Object(n.useState)(!1),f=Object(o.a)(d,2),j=f[0],O=f[1],g=Object(n.useState)(),y=Object(o.a)(g,2),k=y[0],x=y[1],w=function(e){null!==e&&O(!1),x(e)};return r.a.createElement("div",{className:"App"},r.a.createElement(v.a,{className:"text-center"},r.a.createElement("h1",null,"Translation parser")),r.a.createElement(E.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"API Key (json file)"),r.a.createElement(h.a.Text,{className:"text-muted"},r.a.createElement("ol",null,r.a.createElement("li",null,"Go to: https://console.developers.google.com/ and create a project"),r.a.createElement("li",null,"Add the Google Sheets API"),r.a.createElement("li",null,"Create a service account"),r.a.createElement("li",null,"Create a new JSON key under this service account and upload this key here"),r.a.createElement("li",null,"Ensure share the google sheet to the the e-mail address of the service account"))),r.a.createElement(p,{onChange:c})),r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Sheet ID"),r.a.createElement(h.a.Text,{className:"text-muted"},"Copy from https://docs.google.com/spreadsheets/d/<SHEET ID>"),r.a.createElement(b,{onChange:i}))),k&&r.a.createElement(I.a,{variant:"danger",className:"mt-3",onClose:function(){return w(null)},dismissible:!0},k),(!j||!a||!s)&&r.a.createElement(m.a,{onClick:function(){a&&s?(x(null),O(!0)):w(" Please upload a API key json and fill out the sheet ID")}},"Read sheet!")),r.a.createElement(E.a,null,a&&s&&j&&r.a.createElement(C,{sheetId:s,credentials:a.credentials,setError:w})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[221,1,2]]]);
//# sourceMappingURL=main.d7de08ed.chunk.js.map